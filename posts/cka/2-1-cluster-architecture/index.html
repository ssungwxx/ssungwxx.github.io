<!doctype html><html>
<head>
<title>2-1 Cluster Architecture</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<link rel=stylesheet href=/css/bootstrap.min.css>
<link rel=stylesheet href=/css/layouts/main.css>
<link rel=stylesheet href=/css/navigators/navbar.css>
<link rel=stylesheet href=/css/plyr.css>
<link rel=stylesheet href=/css/flag-icon.min.css>
<link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css>
<link rel=icon type=image/png href=/images/cat_hub23ece23f2d77e6bbe48bda0392cd399_19313_42x0_resize_box_3.png>
<meta property="og:title" content="2-1 Cluster Architecture">
<meta property="og:description" content="쿠버네티스의 클러스터 구조 시작하기에 앞서 해당 챕터에서는 쿠버네티스의 아키텍쳐를 고수준부터 설명을 하고 앞으로의 강의에서 좀 더 구체적으로 내려가며 각각의 컴포넌트들에 대해서 알아볼 것이다.
먼저, 각 클러스터의 각 컴포넌트들의 기능과 역할에 대해 알아본다. 쿠버네티스의 아키텍쳐를 선박들에 비유하며 설명할 예정이다.
 Kuberntes 라는 명칭의 유래는 Helmsman(조타수)를 의미하는 그리스어에서 유래했다. 또한, Kubernetes는 Container Orchestration 이기 때문에 내부 클러스터들의 동작이 선박들이 움직이는 모습에 비유를 많이한다.
 쿠버네티스에는 두가지의 선박들로 비유를 할 수 있다. 하나는 직접 바디를 건너 컨테이너를 옮기고 컨트롤 하는 Cargo ship(화물선), 다른 하나는 이러한 화물선들을 지켜보고 관리하는 Control ship이다.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ssungwxx.github.io/posts/cka/2-1-cluster-architecture/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-06-06T14:40:52+09:00">
<meta property="article:modified_time" content="2021-06-06T14:40:52+09:00">
<meta name=description content="2-1 Cluster Architecture">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css>
<link rel=stylesheet href=/css/layouts/single.css>
<link rel=stylesheet href=/css/navigators/sidebar.css>
<link rel=stylesheet href=/css/style.css>
</head>
<body data-spy=scroll data-target=#TableOfContents data-offset=80>
<div class="container-fluid bg-dimmed wrapper">
<nav class="navbar navbar-expand-xl top-navbar final-navbar shadow">
<div class=container>
<button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span>
</button>
<a class=navbar-brand href=/>
<img src=/images/cat_hub23ece23f2d77e6bbe48bda0392cd399_19313_42x0_resize_box_3.png alt=Logo>
SugnwooKim's place</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse lang-selector" id=top-nav-items>
<ul class="navbar-nav ml-auto">
</ul>
</div>
</div>
<img src=/images/cat_hub23ece23f2d77e6bbe48bda0392cd399_19313_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/cat_hub23ece23f2d77e6bbe48bda0392cd399_19313_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo">
</nav>
<section class=sidebar-section id=sidebar-section>
<div class=sidebar-holder>
<div class=sidebar id=sidebar>
<form class=mx-auto method=get action=/search>
<input type=text name=keyword placeholder=Search data-search id=search-box>
</form>
<div class=sidebar-tree>
<ul class=tree id=tree>
<li id=list-heading><a href=/posts data-filter=all>Posts</a></li>
<div class=subtree>
<li><a href=/posts/books/ title=Books>Books</a></li>
<li><a class=active href=/posts/cka/ title=CKA>CKA</a></li>
<li><a href=/posts/think/ title=Think>Think</a></li>
</div>
</ul>
</div>
</div>
</div>
</section>
<section class=content-section id=content-section>
<div class=content>
<div class="container p-0 read-area">
<div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://ssungwxx.github.io/images/default-hero.jpg)>
</div>
<div class=page-content>
<div class="author-profile ml-auto align-self-lg-center">
<img class=rounded-circle src=/images/ssungwxx-cat_hud43b4e68d4b4ab15c9ac212b7a8045bd_2287733_120x120_fit_box_3.png alt="Author Image">
<h5 class=author-name>Sungwoo Kim</h5>
<p>June 6, 2021</p>
</div>
<div class=title>
<h1>2-1 Cluster Architecture</h1>
</div>
<div class=post-content id=post-content>
<h1 id=쿠버네티스의-클러스터-구조>쿠버네티스의 클러스터 구조</h1>
<h2 id=시작하기에-앞서>시작하기에 앞서</h2>
<p>해당 챕터에서는 쿠버네티스의 아키텍쳐를 고수준부터 설명을 하고 앞으로의 강의에서 좀 더 구체적으로 내려가며 각각의 컴포넌트들에 대해서 알아볼 것이다.</p>
<p>먼저, 각 클러스터의 각 컴포넌트들의 기능과 역할에 대해 알아본다. 쿠버네티스의 아키텍쳐를 선박들에 비유하며 설명할 예정이다.</p>
<blockquote>
<p>Kuberntes 라는 명칭의 유래는 Helmsman(조타수)를 의미하는 그리스어에서 유래했다. 또한, Kubernetes는 Container Orchestration 이기 때문에 내부 클러스터들의 동작이 선박들이 움직이는 모습에 비유를 많이한다.</p>
</blockquote>
<p>쿠버네티스에는 두가지의 선박들로 비유를 할 수 있다. 하나는 직접 바디를 건너 컨테이너를 옮기고 컨트롤 하는 Cargo ship(화물선), 다른 하나는 이러한 화물선들을 지켜보고 관리하는 Control ship이다.</p>
<h2 id=cargo-shipworkder-node>Cargo ship(Workder Node)</h2>
<p>워커노드는 쿠버테니스 내부에서는 컨테이너를 싣는 역할을 한다. 실제로는 컨네이너를 호스팅하는 역할을 담당하는 것이다.</p>
<h3 id=kubelet>Kubelet</h3>
<p>각 선박에는 모든 행동들을 관리하는 역할을 하는 Captain이 존재한다. 쿠버네티스에서는 해당 역할을 **<em>Kubelet</em>**이 담당한다.</p>
<p>이는 수행받은 작업을 받아 수행하고 수행된 내용과 상태를 다시 Master Node에게 보낸다.</p>
<h3 id=kube-proxy>Kube proxy</h3>
<p>만약 웹서버가 동작할 때 각각 다른 컨테이너들간의 소통이 필요하다면 어떻게 해야할까? 예를 들어, 한 컨테이너에서 웹서버가 동작하는데 만약 다른 컨테이너, 노드에서 동작중인 DB에 접근하기 위해서는 어떻게 해야할까? 이러한 역할을 **<em>Kuber proxy</em>**가 담당한다.</p>
<p>이러한 Kube proxy는 각 컨테이너마다 존재하며 proxy들끼리 소통을 한다.</p>
<h2 id=control-shipmaster-node>Control ship(Master Node)</h2>
<p>누군가는 컨테이너를 싣고 어떻게 운항할지에 대한 계획을 세워야한다. 계획뿐만 다른 선박과의 소통, 그리고 감시하는 역할은 **<em>Master Node</em>**에서 행한다.</p>
<h3 id=etcd-cluster>ETCD cluster</h3>
<p>많은 컨테이너들이 매일 실리고 내려갈 것이다. 그렇다면 이러한 선박들에 대한 정보를 관리하는 역할이 필요할 것이다. 이러한 정보들은 고가용성 <strong><em>key-value</em></strong> 저장소로 알려진 **<em>ETCD</em>**가 수행한다.</p>
<h3 id=kube-scheduler>Kube scheduler</h3>
<p>그렇다면 ETCD에 있는 정보들을 선박에 싣는 역할을 수행하는 것은 어디서 담당할까? 바로 **<em>Kube scheduler</em>**이다. Scheduler는 Worker Node에 어떠한 정보가 필요한지 확인을 하고 필요한 정보를 ETCD에서 전달해주는 역할을 담당한다.</p>
<h3 id=controller-manager>Controller manager</h3>
<p>갑판에는 다른 사무실을 가지고 특별한 일을 처리하는 부서가 존재한다.</p>
<p>예를들어, 선박들이 혼잡해져서 컨트롤이 필요해거나 선박이 예상치못한 문제에 빠졋을 경우 해당 부서가 이를 담당하는데, 이들은 새로운 컨테이너를 만들고 사용가능하도록 할 수 았다. 이러한 사무실은 선박들간의 소통도 담당한다.</p>
<p>쿠버네티스에서는 이러한 컨트롤을 하기위한 컨트롤러들이 존재하는데 바로, <strong><em>Node controller</em></strong> 와 <strong><em>Replication controller</em></strong> 라고 불리고 각각 다른 영역을 담당한다.</p>
<p>Node Controller는 노드에 관한 부분을 담당한. 노드들을 새로만들거나 사용불가능해진 노드들을 파괴하기도한다.</p>
<p>Replication Controller는 Replication Group 내에 있는 컨테이너들이 실행되는 숫자를 조절한다.</p>
<h3 id=kube-apiserver>Kube APIServer</h3>
<p>그렇다면 위와 같은 부서들이 소통하고 관리하는 역할을 누가 수행할까? 바로 한 단계 더 높은 단계에 있는 **<em>Kube APIServer</em>**가 수행한다. Kube APIServer는 외부 유저들과 소통하며 명령들을 수행하기도한다.</p>
<h2 id=container-runtime-engine>Container runtime engine</h2>
<p>DNS 서비스는 컨테이너 형태를 배포해준다. 이 컨테이너들을 실행가능하게 해주는 역할을 **<em>Container runtime engine</em>**이다.</p>
<p>대표적으로 **<em>Docker</em>**가 있다. 하지만 무조건 Docker를 사용해야하는 것은 아니다. 쿠버네티스는 <strong><em>ContainerD</em></strong> 나 <strong><em>Rocket</em></strong> 도 지원해준다. 또한, Kubernetes에서는 v1.20버전부터 컨테이너 런타임으로 Docker사용을 Deprecate했다. 자세한 내용은 아래의 링크에서 확인할 수 있다.</p>
<p><a href=https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/>Don&rsquo;t Panic: Kubernetes and Docker
</a></p>
</div>
<div class=btn-improve-page>
<a href=https://github.com/ssungwxx/ssungwxx.github.io/edit/main/content/posts/cka/2-1-cluster-architecture.md title="Improve this page" target=_blank rel=noopener>
<i class="fas fa-code-branch"></i>
Improve this page
</a>
</div>
<hr>
<div class="row next-prev-navigator">
</div>
<hr>
</div>
</div>
</div>
<a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a>
</section>
<section class=toc-section id=toc-section>
<div class=toc-holder>
<h5 class="text-center pl-3">Table of Contents</h5>
<hr>
<div class=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#시작하기에-앞서>시작하기에 앞서</a></li>
<li><a href=#cargo-shipworkder-node>Cargo ship(Workder Node)</a>
<ul>
<li><a href=#kubelet>Kubelet</a></li>
<li><a href=#kube-proxy>Kube proxy</a></li>
</ul>
</li>
<li><a href=#control-shipmaster-node>Control ship(Master Node)</a>
<ul>
<li><a href=#etcd-cluster>ETCD cluster</a></li>
<li><a href=#kube-scheduler>Kube scheduler</a></li>
<li><a href=#controller-manager>Controller manager</a></li>
<li><a href=#kube-apiserver>Kube APIServer</a></li>
</ul>
</li>
<li><a href=#container-runtime-engine>Container runtime engine</a></li>
</ul>
</nav>
</div>
</div>
</section>
</div>
<footer class="container-fluid text-center align-content-center footer pb-2">
<div class="container pt-5">
<div class="row text-left">
<div class="col-md-4 col-sm-12">
<h5>Navigation</h5>
<ul>
<li class=nav-item>
<a class=smooth-scroll href=/#about>About</a>
</li>
<li class=nav-item>
<a class=smooth-scroll href=/#skills>Skills</a>
</li>
<li class=nav-item>
<a class=smooth-scroll href=/#experiences>Experiences</a>
</li>
<li class=nav-item>
<a class=smooth-scroll href=/#education>Education</a>
</li>
</ul>
</div>
<div class="col-md-4 col-sm-12">
<h5>Contact me:</h5>
<ul>
<li><span>Email: </span> <span>sungwoo.dev@gmail.com</span></li>
</ul>
</div>
</div>
</div>
<hr>
<div class=container>
<div class="row text-left">
<div class=col-md-4>
<a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener>
<img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha
</a>
</div>
<div class="col-md-4 text-center">© 2021 Copyright.</div>
<div class="col-md-4 text-right">
<a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18>
</a>
</div>
</div>
</div>
</footer>
<script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>